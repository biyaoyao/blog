function G(){for(var e=new Array,t=0;t<arguments.length;t++){var i=arguments[t];if("string"==typeof i&&(i=document.getElementById(i)),1==arguments.length)return i;e.push(i)}return e}function getValue(e){var t=0;switch(e){case"scrollTop":"undefined"!=typeof window.pageYOffset?t=window.pageYOffset:"undefined"!=typeof document.compatMode&&"BackCompat"!=document.compatMode?t=document.documentElement.scrollTop:"undefined"!=typeof document.body&&(t=document.body.scrollTop);break;case"clientWidth":"undefined"!=typeof document.compatMode&&"BackCompat"!=document.compatMode?t=document.documentElement.clientWidth:"undefined"!=typeof document.body&&(t=document.body.clientWidth);break;case"clientHeight":"undefined"!=typeof document.compatMode&&"BackCompat"!=document.compatMode?t=document.documentElement.clientHeight:"undefined"!=typeof document.body&&(t=document.body.clientHeight);break;case"clientHeight":"undefined"!=typeof document.compatMode&&"BackCompat"!=document.compatMode?t=document.documentElement.clientHeight:"undefined"!=typeof document.body&&(t=document.body.clientHeight);break;case"scrollWidth":"undefined"!=typeof document.compatMode&&"BackCompat"!=document.compatMode?t=document.documentElement.scrollWidth:"undefined"!=typeof document.body&&(t=document.body.scrollWidth);break;case"scrollHeight":"undefined"!=typeof document.compatMode&&"BackCompat"!=document.compatMode?t=document.documentElement.scrollHeight:"undefined"!=typeof document.body&&(t=document.body.scrollHeight)}return t}function space(e){if("begin"==e){var t=document.getElementById("ft");"undefined"!=typeof t&&null!=t&&(t.id="ft_popup"),t=document.getElementById("usrbar"),"undefined"!=typeof t&&null!=t&&(t.id="usrbar_popup")}else if("end"==e){var t=document.getElementById("ft_popup");"undefined"!=typeof t&&null!=t&&(t.id="ft"),t=document.getElementById("usrbar_popup"),"undefined"!=typeof t&&null!=t&&(t.id="usrbar")}}function openshow(e,t,i,n,s){g_pop=new Popup({contentType:s,isReloadOnClose:!1,width:i,height:n}),g_pop.setContent("title",t),g_pop.setContent("contentUrl",e),g_pop.build(),g_pop.show()}function g_close_pop_re(){g_pop.close(),location.reload()}function Comment(e,t,i){g_pop=new Popup({contentType:1,isReloadOnClose:!1,width:t,height:i}),g_pop.setContent("title","登陆"),g_pop.setContent("scrollType","no"),g_pop.setContent("contentUrl",e),g_pop.build(),g_pop.show()}function g_close_pop(){g_pop.close(),g_pop=null}function ShowAlert(e,t,i,n){var s=new Popup({contentType:4,isReloadOnClose:!1,width:i,height:n});s.setContent("title",e),s.setContent("alertCon",t),s.build(),s.show()}function Wclose(){g_pop.close(),g_pop=null}if(Array.prototype.push||(Array.prototype.push=function(){for(var e=this.length,t=0;t<arguments.length;t++)this[e+t]=arguments[t];return this.length}),Function.prototype.bind=function(e){var t=this;return function(){t.apply(e,arguments)}},Function.prototype.bindAsEventListener=function(e){var t=this;return function(i){t.call(e,i||window.event)}},Object.extend=function(e,t){for(property in t)e[property]=t[property];return e},!window.Event)var Event=new Object;Object.extend(Event,{observers:!1,element:function(e){return e.target||e.srcElement},isLeftClick:function(e){return e.which&&1==e.which||e.button&&1==e.button},pointerX:function(e){return e.pageX||e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},pointerY:function(e){return e.pageY||e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)},stop:function(e){e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)},findElement:function(e,t){for(var i=Event.element(e);i.parentNode&&(!i.tagName||i.tagName.toUpperCase()!=t.toUpperCase());)i=i.parentNode;return i},_observeAndCache:function(e,t,i,n){this.observers||(this.observers=[]),e.addEventListener?(this.observers.push([e,t,i,n]),e.addEventListener(t,i,n)):e.attachEvent&&(this.observers.push([e,t,i,n]),e.attachEvent("on"+t,i))},unloadCache:function(){if(Event.observers){for(var e=0;e<Event.observers.length;e++)Event.stopObserving.apply(this,Event.observers[e]),Event.observers[e][0]=null;Event.observers=!1}},observe:function(e,t,i,n){var e=G(e);n=n||!1,"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.attachEvent)&&(t="keydown"),this._observeAndCache(e,t,i,n)},stopObserving:function(e,t,i,n){var e=G(e);n=n||!1,"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.detachEvent)&&(t="keydown"),e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)}}),Event.observe(window,"unload",Event.unloadCache,!1);var Class=function(){var e=function(){this.initialize.apply(this,arguments)};for(j=0;j<arguments.length;j++){superClass=arguments[j];for(member in superClass.prototype)e.prototype[member]=superClass.prototype[member]}return e.child=function(){return new Class(this)},e.extend=function(t){for(property in t)e.prototype[property]=t[property]},e},Popup=new Class;Popup.prototype={iframeIdName:"ifr_popup",initialize:function(e){this.config=Object.extend({contentType:1,isHaveTitle:!0,scrollType:"no",isBackgroundCanClick:!1,isSupportDraging:!0,isShowShadow:!0,isReloadOnClose:!0,width:400,height:300},e||{}),this.info={shadowWidth:4,title:"",contentUrl:"",contentHtml:"",callBack:null,parameter:null,confirmCon:"",alertCon:"",someHiddenTag:"select,object,embed",someHiddenEle:"",overlay:0,coverOpacity:40},this.color={cColor:"#000000",bColor:"#FFFFFF",tColor:"#709CD2",wColor:"#FFFFFF"},this.dropClass=null,this.someToHidden=[],this.config.isHaveTitle||(this.config.isSupportDraging=!1),this.iniBuild()},setContent:function(e,t){if(""!=t)switch(e){case"width":this.config.width=t;break;case"height":this.config.height=t;break;case"title":this.info.title=t;break;case"contentUrl":this.info.contentUrl=t;break;case"contentHtml":this.info.contentHtml=t;break;case"callBack":this.info.callBack=t;break;case"parameter":this.info.parameter=t;break;case"confirmCon":this.info.confirmCon=t;break;case"alertCon":this.info.alertCon=t;break;case"someHiddenTag":this.info.someHiddenTag=t;break;case"someHiddenEle":this.info.someHiddenEle=t;break;case"overlay":this.info.overlay=t}},iniBuild:function(){G("dialogCase")?G("dialogCase").parentNode.removeChild(G("dialogCase")):function(){};var e=document.createElement("span");e.id="dialogCase",document.body.appendChild(e)},build:function(){var e=10001+10*this.info.overlay,t=e+2;this.iframeIdName="ifr_popup"+this.info.overlay;var i="images/dialogclose.gif",n='<input type="image" id="dialogBoxClose" src="'+i+'" border="0" width="16" height="16" align="absmiddle" title="关闭"/>',s="filter: alpha(opacity="+this.info.coverOpacity+");opacity:"+this.info.coverOpacity/100+";",a='<div id="dialogBoxBG" style="position: fixed;top:0px;left:0px;width:100%;height:100%;z-index:'+e+";"+s+"background-color:"+this.color.cColor+';display:none;"></div>',r='<div id="dialogBox" style="border:1px solid '+this.color.tColor+";display:none;z-index:"+t+";position:relative;width:"+this.config.width+'px;"><table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="'+this.color.bColor+'">';r+=this.config.isHaveTitle?'<tr height="24" bgcolor="'+this.color.tColor+'"><td><table style="-moz-user-select:none;height:24px;" width="100%" border="0" cellpadding="0" cellspacing="0" ><tr><td width="6" height="24"></td><td id="dialogBoxTitle" style="color:'+this.color.wColor+';font-size:14px;font-weight:bold;">'+this.info.title+'&nbsp;</td><td id="dialogClose" width="20" align="right" valign="middle">'+n+'</td><td width="6"></td></tr></table></td></tr>':'<tr height="10"><td align="right">'+n+"</td></tr>",r+='<tr style="height:'+this.config.height+'px" valign="top"><td id="dialogBody" style="position:relative;"></td></tr></table></div><div id="dialogBoxShadow" style="display:none;z-index:'+e+';"></div>',this.config.isBackgroundCanClick?G("dialogCase").innerHTML=r:(G("dialogCase").innerHTML=a+r,this.setBackgroundSize(),window.onresize=this.setBackgroundSize),Event.observe(G("dialogBoxClose"),"click",this.reset.bindAsEventListener(this),!1),this.config.isSupportDraging&&(dropClass=new Dragdrop(this.config.width,this.config.height,this.info.shadowWidth,this.config.isSupportDraging,this.config.contentType),G("dialogBoxTitle").style.cursor="move"),this.lastBuild()},setBackgroundSize:function(){var getValueWidth,getMaxValueWidth=[getValue("clientWidth"),getValue("scrollWidth")];getValueWidth=eval("Math.max("+getMaxValueWidth.toString()+")"),G("dialogBoxBG").style.width=getValueWidth;var getValueHeight,getMaxValueHeight=[getValue("clientHeight"),getValue("scrollHeight")];getValueHeight=eval("Math.max("+getMaxValueHeight.toString()+")"),G("dialogBoxBG").style.height=getValueHeight},lastBuild:function(){var e='<div style="width:100%;height:100%;text-align:center;"><div style="margin:20px 20px 0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.confirmCon+'</div><div style="margin:20px;"><input id="dialogOk" type="button" value=" 确定 "/>&nbsp;<input id="dialogCancel" type="button" value=" 取消 "/></div></div>',t='<div style="width:100%;height:100%;text-align:center;"><div style="margin:20px 20px 0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.alertCon+'</div><div style="margin:20px;"><input id="dialogYES" type="button" value=" 确定 "/></div></div>',i=10001+10*this.info.overlay,n=i+4;if(1==this.config.contentType){var s="<iframe width='100%' style='height:"+this.config.height+"px' name='"+this.iframeIdName+"' id='"+this.iframeIdName+"' src='"+this.info.contentUrl+"' frameborder='0' scrolling='"+this.config.scrollType+"'></iframe>",a="<div id='iframeBG' style='position:fixed;top:0px;left:0px;width:1px;height:1px;z-index:"+n+";filter: alpha(opacity=00);opacity:0.00;background-color:#ffffff;'><div>";G("dialogBody").innerHTML=s+a}else 2==this.config.contentType?G("dialogBody").innerHTML=this.info.contentHtml:3==this.config.contentType?(G("dialogBody").innerHTML=e,Event.observe(G("dialogOk"),"click",this.forCallback.bindAsEventListener(this),!1),Event.observe(G("dialogCancel"),"click",this.close.bindAsEventListener(this),!1)):4==this.config.contentType&&(G("dialogBody").innerHTML=t,Event.observe(G("dialogYES"),"click",this.close.bindAsEventListener(this),!1))},reBuild:function(){G("dialogBody").height=G("dialogBody").clientHeight,this.lastBuild()},show:function(){this.hiddenSome(),this.middle(),this.config.isShowShadow&&this.shadow()},forCallback:function(){return this.info.callBack(this.info.parameter)},shadow:function(){var e=G("dialogBoxShadow"),t=G("dialogBox");e.style.position="fixed",e.style.background="#000",e.style.display="",e.style.opacity="0.2",e.style.filter="alpha(opacity=20)",e.style.top=t.offsetTop+this.info.shadowWidth+"px",e.style.left=t.offsetLeft+this.info.shadowWidth+"px",e.style.width=t.offsetWidth+"px",e.style.height=t.offsetHeight+"px"},middle:function(){this.config.isBackgroundCanClick||(G("dialogBoxBG").style.display="");var e=G("dialogBox");e.style.position="fixed",e.style.display="";var t=getValue("clientWidth"),i=getValue("clientHeight"),n=getValue("scrollTop"),s=t/2-e.offsetWidth/2,a=i/2+n-e.offsetHeight/2,r=a>0?a:i/2+n-e.offsetHeight/2;1>r&&(r="20"),1>s&&(s="20"),e.style.left=s+"px",e.style.top=r+"px"},reset:function(){this.config.isReloadOnClose&&top.location.reload(),this.close()},close:function(){G("dialogBox").style.display="none",this.config.isBackgroundCanClick||(G("dialogBoxBG").style.display="none"),this.config.isShowShadow&&(G("dialogBoxShadow").style.display="none"),G("dialogBody").innerHTML="",this.showSome()},hiddenSome:function(){var e=this.info.someHiddenTag.split(",");1==e.length&&""==e[0]&&(e.length=0);for(var t=0;t<e.length;t++)this.hiddenTag(e[t]);var i=this.info.someHiddenEle.split(",");1==i.length&&""==i[0]&&(i.length=0);for(var t=0;t<i.length;t++)this.hiddenEle(i[t]);space("begin")},hiddenTag:function(e){var t=document.getElementsByTagName(e);if(null!=t)for(var i=0;i<t.length;i++)"none"!=t[i].style.display&&"hidden"!=t[i].style.visibility&&(t[i].style.visibility="hidden",this.someToHidden.push(t[i]))},hiddenEle:function(e){var t=document.getElementById(e);"undefined"!=typeof t&&null!=t&&(t.style.visibility="hidden",this.someToHidden.push(t))},showSome:function(){for(var e=0;e<this.someToHidden.length;e++)this.someToHidden[e].style.visibility="visible";space("end")}};var Dragdrop=new Class;Dragdrop.prototype={initialize:function(e,t,i,n,s){this.dragData=null,this.dragDataIn=null,this.backData=null,this.width=e,this.height=t,this.shadowWidth=i,this.showShadow=n,this.contentType=s,this.IsDraging=!1,this.oObj=G("dialogBox"),Event.observe(G("dialogBoxTitle"),"mousedown",this.moveStart.bindAsEventListener(this),!1)},moveStart:function(e){this.IsDraging=!0,1==this.contentType&&(G("iframeBG").style.display="",G("iframeBG").style.width=this.width,G("iframeBG").style.height=this.height),Event.observe(document,"mousemove",this.mousemove.bindAsEventListener(this),!1),Event.observe(document,"mouseup",this.mouseup.bindAsEventListener(this),!1),Event.observe(document,"selectstart",this.returnFalse,!1),this.dragData={x:Event.pointerX(e),y:Event.pointerY(e)},this.backData={x:parseInt(this.oObj.style.left),y:parseInt(this.oObj.style.top)}},mousemove:function(e){if(this.IsDraging){var t=Event.pointerX(e)-this.dragData.x+parseInt(this.oObj.style.left),i=Event.pointerY(e)-this.dragData.y+parseInt(this.oObj.style.top);this.dragData.y<parseInt(this.oObj.style.top)?i-=12:this.dragData.y>parseInt(this.oObj.style.top)+25&&(i+=12),this.oObj.style.left=t+"px",this.oObj.style.top=i+"px",this.showShadow&&(G("dialogBoxShadow").style.left=t+this.shadowWidth+"px",G("dialogBoxShadow").style.top=i+this.shadowWidth+"px"),this.dragData={x:Event.pointerX(e),y:Event.pointerY(e)},document.body.style.cursor="move"}},mouseup:function(e){if(this.IsDraging){1==this.contentType&&(G("iframeBG").style.display="none"),document.onmousemove=null,document.onmouseup=null;var n,s,t=Event.pointerX(e)-(document.documentElement.scrollLeft||document.body.scrollLeft),i=Event.pointerY(e)-(document.documentElement.scrollTop||document.body.scrollTop);this.showShadow?(n=parseInt(this.oObj.style.top)+this.height+this.shadowWidth,s=parseInt(this.oObj.style.left)+this.width+this.shadowWidth):(n=parseInt(this.oObj.style.top)+this.height,s=parseInt(this.oObj.style.left)+this.width),(1>t||1>i||t>document.body.clientWidth||i>document.body.clientHeight||parseInt(this.oObj.style.left)<0||parseInt(this.oObj.style.top)<0||s>document.body.clientWidth||n>document.body.clientHeight)&&(this.oObj.style.left=this.backData.x,this.oObj.style.top=this.backData.y,this.showShadow&&(G("dialogBoxShadow").style.left=this.backData.x+this.shadowWidth,G("dialogBoxShadow").style.top=this.backData.y+this.shadowWidth)),this.IsDraging=!1,document.body.style.cursor="",Event.stopObserving(document,"selectstart",this.returnFalse,!1)}},returnFalse:function(){return!1}};