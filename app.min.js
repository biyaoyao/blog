var express=require("express"),view=require("./view/view"),action=require("./action/action"),http=require("http"),path=require("path"),session=require("express-session"),MongoStore=require("connect-mongo")(session),cookieParser=require("cookie-parser"),app=express();app.set("port",process.env.PORT||8090),app.set("views",__dirname+"/views"),app.set("view engine","ejs"),app.use(express.favicon()),app.use(express.logger("dev")),app.use(express.bodyParser()),app.use(express.methodOverride()),app.use(express["static"](path.join(__dirname,"public"))),app.use(express.cookieParser("sctalk admin manager")),app.use(session({secret:"recommand 128 bytes random string",cookie:{maxAge:72e6}})),app.get("/",view.index),app.get("/home",view.index),app.get("/blog",view.blog),app.get("/albumList",view.albumList),app.get("/albumDetail",view.albumDetail),app.get("/profile",view.profile),app.get("/msgBoard",view.msgBoard),app.get("/manager",view.manager),app.get("/login",view.login),app.get("/articleDetail",view.articleDetail),app.get("/newArticle",view.newArticle),app.get("/articleTypeEdit",view.articleTypeEdit),app.get("/imgUpload",view.imgUpload),app.get("/login.action",action.loginAction),app.get("/logout.action",action.logoutAction),app.get("/addNewArticleType.action",action.addNewArticleTypeAction),app.get("/renameArticleType.action",action.renameArticleTypeAction),app.get("/delArticleType.action",action.adelArticleTypeAction),app.post("/createNewArticle.action",action.createNewArticleAction),app.post("/commentArticle.action",action.commentArticleAction),app.get("/addImageType.action",action.addImageTypeAction),app.get("/editImageType.action",action.editImageTypeActin),app.get("/deleteImageType.action",action.deleteImageTypeActin),app.get("/sumbitImg.action",action.sumbitImgAction),app.get("/editImage.action",action.editImageActin),app.get("/deleteImage.action",action.deleteImageActin),app.get("/leaveMsg.action",action.leaveMsgAction),app.get("/visit.action",action.visitAction),app.get("/randCode",action.randCode),http.createServer(app).listen(app.get("port"),function(){});